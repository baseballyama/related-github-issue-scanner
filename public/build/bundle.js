var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function s(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function u(t,e){t.appendChild(e)}function l(t,e,n){t.insertBefore(e,n||null)}function a(t){t.parentNode.removeChild(t)}function i(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function c(t){return document.createElement(t)}function f(t){return document.createTextNode(t)}function p(){return f(" ")}function d(){return f("")}function h(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function m(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function g(t){return""===t?null:+t}function $(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function b(t,e){t.value=null==e?"":e}function v(t,e,n,r){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}let y;function x(t){y=t}const _=[],w=[],N=[],E=[],T=Promise.resolve();let k=!1;function P(){k||(k=!0,T.then(z))}function A(t){N.push(t)}const S=new Set;let H=0;function z(){const t=y;do{for(;H<_.length;){const t=_[H];H++,x(t),L(t.$$)}for(x(null),_.length=0,H=0;w.length;)w.pop()();for(let t=0;t<N.length;t+=1){const e=N[t];S.has(e)||(S.add(e),e())}N.length=0}while(_.length);for(;E.length;)E.pop()();k=!1,S.clear(),x(t)}function L(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(A)}}const O=new Set;let G;function I(){G={r:0,c:[],p:G}}function M(){G.r||r(G.c),G=G.p}function R(t,e){t&&t.i&&(O.delete(t),t.i(e))}function C(t,e,n,r){if(t&&t.o){if(O.has(t))return;O.add(t),G.c.push((()=>{O.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}function j(t){t&&t.c()}function B(t,n,o,u){const{fragment:l,on_mount:a,on_destroy:i,after_update:c}=t.$$;l&&l.m(n,o),u||A((()=>{const n=a.map(e).filter(s);i?i.push(...n):r(n),t.$$.on_mount=[]})),c.forEach(A)}function J(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function q(e,s,o,u,l,i,c,f=[-1]){const p=y;x(e);const d=e.$$={fragment:null,ctx:null,props:i,update:t,not_equal:l,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(s.context||(p?p.$$.context:[])),callbacks:n(),dirty:f,skip_bound:!1,root:s.target||p.$$.root};c&&c(d.root);let h=!1;if(d.ctx=o?o(e,s.props||{},((t,n,...r)=>{const s=r.length?r[0]:n;return d.ctx&&l(d.ctx[t],d.ctx[t]=s)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](s),h&&function(t,e){-1===t.$$.dirty[0]&&(_.push(t),P(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(e,t)),n})):[],d.update(),h=!0,r(d.before_update),d.fragment=!!u&&u(d.ctx),s.target){if(s.hydrate){const t=function(t){return Array.from(t.childNodes)}(s.target);d.fragment&&d.fragment.l(t),t.forEach(a)}else d.fragment&&d.fragment.c();s.intro&&R(e.$$.fragment),B(e,s.target,s.anchor,s.customElement),z()}x(p)}class D{$destroy(){J(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function F(t,e,n){const r=t.slice();return r[2]=e[n],r}function X(t,e,n){const r=t.slice();return r[5]=e[n],r}function K(t){let e,n=[...Array(t[1]).keys()],r=[];for(let e=0;e<n.length;e+=1)r[e]=V(X(t,n,e));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=d()},m(t,n){for(let e=0;e<r.length;e+=1)r[e].m(t,n);l(t,e,n)},p(t,s){if(2&s){let o;for(n=[...Array(t[1]).keys()],o=0;o<n.length;o+=1){const u=X(t,n,o);r[o]?r[o].p(u,s):(r[o]=V(u),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(t){i(r,t),t&&a(e)}}}function Q(t){let e,n;return{c(){e=c("span"),n=f("|"),v(e,"margin-left",8*(t[5]+1)+"px")},m(t,r){l(t,e,r),u(e,n)},p(t,n){2&n&&v(e,"margin-left",8*(t[5]+1)+"px")},d(t){t&&a(e)}}}function U(t){let e,n;return{c(){e=c("span"),n=f("|-"),v(e,"margin-left",8*(t[5]+1)+"px")},m(t,r){l(t,e,r),u(e,n)},p(t,n){2&n&&v(e,"margin-left",8*(t[5]+1)+"px")},d(t){t&&a(e)}}}function V(t){let e;function n(t,e){return t[5]+1===t[1]?U:Q}let r=n(t),s=r(t);return{c(){s.c(),e=d()},m(t,n){s.m(t,n),l(t,e,n)},p(t,o){r===(r=n(t))&&s?s.p(t,o):(s.d(1),s=r(t),s&&(s.c(),s.m(e.parentNode,e)))},d(t){s.d(t),t&&a(e)}}}function W(t){let e,n;return e=new tt({props:{issue:t[2],layer:t[1]+1}}),{c(){j(e.$$.fragment)},m(t,r){B(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.issue=t[2]),2&n&&(r.layer=t[1]+1),e.$set(r)},i(t){n||(R(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){J(e,t)}}}function Y(t){let e,n,r,s,o,d,h,g,b,v,y,x,_,w,N,E,T,k=t[0].number+"",P=t[0].organization+"",A=t[0].repository+"",S=t[0].title+"",H=t[0].createdAt+"",z=t[1]>1&&K(t),L=t[0].relatedIssues,O=[];for(let e=0;e<L.length;e+=1)O[e]=W(F(t,L,e));const G=t=>C(O[t],1,1,(()=>{O[t]=null}));return{c(){e=c("div"),z&&z.c(),n=p(),r=c("a"),s=f("#"),o=f(k),d=f(" ("),h=f(P),g=f(" / "),b=f(A),v=f(") "),y=f(S),x=f("("),_=f(H),w=f(")"),E=p();for(let t=0;t<O.length;t+=1)O[t].c();m(r,"href",N=t[0].url),m(e,"class","issue svelte-zxkmk5")},m(t,a){l(t,e,a),z&&z.m(e,null),u(e,n),u(e,r),u(r,s),u(r,o),u(r,d),u(r,h),u(r,g),u(r,b),u(r,v),u(r,y),u(r,x),u(r,_),u(r,w),u(e,E);for(let t=0;t<O.length;t+=1)O[t].m(e,null);T=!0},p(t,[s]){if(t[1]>1?z?z.p(t,s):(z=K(t),z.c(),z.m(e,n)):z&&(z.d(1),z=null),(!T||1&s)&&k!==(k=t[0].number+"")&&$(o,k),(!T||1&s)&&P!==(P=t[0].organization+"")&&$(h,P),(!T||1&s)&&A!==(A=t[0].repository+"")&&$(b,A),(!T||1&s)&&S!==(S=t[0].title+"")&&$(y,S),(!T||1&s)&&H!==(H=t[0].createdAt+"")&&$(_,H),(!T||1&s&&N!==(N=t[0].url))&&m(r,"href",N),3&s){let n;for(L=t[0].relatedIssues,n=0;n<L.length;n+=1){const r=F(t,L,n);O[n]?(O[n].p(r,s),R(O[n],1)):(O[n]=W(r),O[n].c(),R(O[n],1),O[n].m(e,null))}for(I(),n=L.length;n<O.length;n+=1)G(n);M()}},i(t){if(!T){for(let t=0;t<L.length;t+=1)R(O[t]);T=!0}},o(t){O=O.filter(Boolean);for(let t=0;t<O.length;t+=1)C(O[t]);T=!1},d(t){t&&a(e),z&&z.d(),i(O,t)}}}function Z(t,e,n){let{issue:r}=e,{layer:s=1}=e;return t.$$set=t=>{"issue"in t&&n(0,r=t.issue),"layer"in t&&n(1,s=t.layer)},[r,s]}class tt extends D{constructor(t){super(),q(this,t,Z,Y,o,{issue:0,layer:1})}}async function et(t,e,n,r=new Set){const s=function(t,e,n){return`https://api.github.com/repos/${t}/${e}/issues/${n}`}(t,e,n);if(r.has(s))return null;r.add(s);const o=JSON.parse(await st("GET",s));if("Not Found"===o.message)return null;const u=await async function(t,e){const n=rt(e.body),[r,s]=await Promise.all([st("GET",`${t}/comments`),st("GET",`${t}/events`)]);return JSON.parse(r).forEach((t=>{rt(t.body).forEach((t=>n.push(t)))})),JSON.parse(s).forEach((t=>{nt(t).forEach((t=>{rt(t).forEach((t=>n.push(t)))}))})),n}(s,o),l=u.map((t=>{const e=function(t){const e=t.split("/");return{organizationName:e[3],repositoryName:e[4],issueNumber:parseInt(e[6])}}(t);return et(e.organizationName,e.repositoryName,e.issueNumber,r)})),a=(await Promise.all(l)).filter(Boolean);return{title:o.title,organization:t,repository:e,number:o.number,createdAt:o.created_at,raw:o,url:o.html_url,relatedIssues:a}}function nt(t){const e=[];for(var n in t)"object"==typeof t[n]?Array.isArray(t[n])?t[n].forEach((function(t){e.push(...nt(t))})):e.push(...nt(t[n])):"html_url"===n&&e.push(t[n]);return e}function rt(t){const e=t.match(/https:\/\/github.com\/[^\/]+\/[^\/]+\/(pull|issues)\/[\d]+/g);return null===e?[]:e}function st(t,e){return new Promise((function(n,r){let s=new XMLHttpRequest;s.open(t,e),s.onload=function(){this.status>=200&&this.status<300?n(s.responseText):r({status:this.status,statusText:s.statusText})},s.onerror=function(){r({status:this.status,statusText:s.statusText})},s.send()}))}function ot(t){let e;return{c(){e=c("p"),e.textContent="Getting data now! Please wait...",v(e,"font-weight","bold")},m(t,n){l(t,e,n)},d(t){t&&a(e)}}}function ut(t){let e,n,r,s,o,u,i;return u=new tt({props:{issue:t[4],layer:1}}),{c(){e=c("h2"),e.textContent="Search Result",n=p(),r=c("a"),r.innerHTML="<h3>Please give a GitHub Star for this site!</h3>",s=p(),o=c("div"),j(u.$$.fragment),m(r,"href","https://github.com/baseballyama/related-github-issue-scanner"),m(r,"target","_blank"),m(r,"rel","noopener noreferrer"),m(r,"class","star svelte-1rvr8ue"),m(o,"class","result svelte-1rvr8ue")},m(t,a){l(t,e,a),l(t,n,a),l(t,r,a),l(t,s,a),l(t,o,a),B(u,o,null),i=!0},p(t,e){const n={};16&e&&(n.issue=t[4]),u.$set(n)},i(t){i||(R(u.$$.fragment,t),i=!0)},o(t){C(u.$$.fragment,t),i=!1},d(t){t&&a(e),t&&a(n),t&&a(r),t&&a(s),t&&a(o),J(u)}}}function lt(t){let e,n,s,o,i,d,v,y,x,_,w,N,E,T,k,P,A,S,H,z,L,O,G,j,B,J,q,D,F,X,K,Q,U,V,W,Y,Z=(t[3]||"")+"",tt=t[5]&&ot(),et=t[4]&&ut(t);return{c(){e=c("header"),n=c("h1"),n.innerHTML='<a href="https://github.com/baseballyama/related-github-issue-scanner" target="_blank" rel="noopener noreferrer">Related GitHub Issue Scanner</a>',s=p(),o=c("p"),o.textContent="Recursively search for issues / PRs linked from a given GitHub issue.",i=p(),d=c("p"),v=f(Z),y=p(),tt&&tt.c(),x=p(),_=c("main"),w=c("section"),N=c("form"),E=c("table"),T=c("tr"),k=c("th"),k.innerHTML='<label for="org">Organization Name</label>',P=p(),A=c("td"),S=c("input"),H=p(),z=c("tr"),L=c("th"),L.innerHTML='<label for="org">Repository Name</label>',O=p(),G=c("td"),j=c("input"),B=p(),J=c("tr"),q=c("th"),q.innerHTML='<label for="org">Issue Number</label>',D=p(),F=c("td"),X=c("input"),K=p(),Q=c("button"),Q.textContent="Search",U=p(),et&&et.c(),m(d,"class","error svelte-1rvr8ue"),m(e,"class","svelte-1rvr8ue"),m(k,"class","svelte-1rvr8ue"),m(S,"id","org"),m(S,"type","text"),m(S,"class","svelte-1rvr8ue"),m(A,"class","svelte-1rvr8ue"),m(L,"class","svelte-1rvr8ue"),m(j,"id","org"),m(j,"type","text"),m(j,"class","svelte-1rvr8ue"),m(G,"class","svelte-1rvr8ue"),m(q,"class","svelte-1rvr8ue"),m(X,"id","org"),m(X,"type","number"),m(X,"class","svelte-1rvr8ue"),m(F,"class","svelte-1rvr8ue"),m(Q,"type","submit"),m(w,"class","form-wrapper svelte-1rvr8ue"),m(_,"class","svelte-1rvr8ue")},m(r,a){var c;l(r,e,a),u(e,n),u(e,s),u(e,o),u(e,i),u(e,d),u(d,v),u(e,y),tt&&tt.m(e,null),l(r,x,a),l(r,_,a),u(_,w),u(w,N),u(N,E),u(E,T),u(T,k),u(T,P),u(T,A),u(A,S),b(S,t[0]),u(E,H),u(E,z),u(z,L),u(z,O),u(z,G),u(G,j),b(j,t[1]),u(E,B),u(E,J),u(J,q),u(J,D),u(J,F),u(F,X),b(X,t[2]),u(N,K),u(N,Q),u(_,U),et&&et.m(_,null),V=!0,W||(Y=[h(S,"input",t[7]),h(j,"input",t[8]),h(X,"input",t[9]),h(N,"submit",(c=t[6],function(t){return t.preventDefault(),c.call(this,t)}))],W=!0)},p(t,[n]){(!V||8&n)&&Z!==(Z=(t[3]||"")+"")&&$(v,Z),t[5]?tt||(tt=ot(),tt.c(),tt.m(e,null)):tt&&(tt.d(1),tt=null),1&n&&S.value!==t[0]&&b(S,t[0]),2&n&&j.value!==t[1]&&b(j,t[1]),4&n&&g(X.value)!==t[2]&&b(X,t[2]),t[4]?et?(et.p(t,n),16&n&&R(et,1)):(et=ut(t),et.c(),R(et,1),et.m(_,null)):et&&(I(),C(et,1,1,(()=>{et=null})),M())},i(t){V||(R(et),V=!0)},o(t){C(et),V=!1},d(t){t&&a(e),tt&&tt.d(),t&&a(x),t&&a(_),et&&et.d(),W=!1,r(Y)}}}function at(t,e,n){let r,s="",o="",u=0,l="",a=!1;return[s,o,u,l,r,a,async function(){a||(n(3,l=""),s?o?u<=0?n(3,l="Please input Issue Number."):(n(5,a=!0),await(P(),T),n(4,r=await et(s,o,u)),r||n(3,l="The specified issue does not exist"),n(5,a=!1)):n(3,l="Please input Repository Name."):n(3,l="Please input Organization Name."))},function(){s=this.value,n(0,s)},function(){o=this.value,n(1,o)},function(){u=g(this.value),n(2,u)}]}return new class extends D{constructor(t){super(),q(this,t,at,lt,o,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
